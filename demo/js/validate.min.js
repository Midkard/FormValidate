/**
* @midkard/formValidate v1.2.3
*/
var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,a){e instanceof String&&(e=String(e));for(var n=e.length,i=0;i<n;i++){var s=e[i];if(t.call(a,s,i,e))return{i:i,v:s}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,a){e!=Array.prototype&&e!=Object.prototype&&(e[t]=a.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,a,n){if(t){for(a=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var i=e[n];i in a||(a[i]={}),a=a[i]}(t=t(n=a[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(a,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3"),function(e,t,a){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"undefined"==typeof Meteor?module.exports=e(require("jquery")):e(t||a)}(function(r){function l(c,k,y){var b={invalid:[],getCaret:function(){try{var e=0,t=c.get(0),a=document.selection,n=t.selectionStart;if(a&&-1===navigator.appVersion.indexOf("MSIE 10")){var i=a.createRange();i.moveStart("character",-b.val().length),e=i.text.length}else!n&&"0"!==n||(e=n);return e}catch(e){}},setCaret:function(e){try{if(c.is(":focus")){var t=c.get(0);if(t.setSelectionRange)t.setSelectionRange(e,e);else{var a=t.createTextRange();a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",e),a.select()}}}catch(e){}},events:function(){c.on("keydown.mask",function(e){c.data("mask-keycode",e.keyCode||e.which),c.data("mask-previus-value",c.val()),c.data("mask-previus-caret-pos",b.getCaret()),b.maskDigitPosMapOld=b.maskDigitPosMap}).on(r.jMaskGlobals.useInput?"input.mask":"keyup.mask",b.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){c.keydown().keyup()},100)}).on("change.mask",function(){c.data("changed",!0)}).on("blur.mask",function(){s===b.val()||c.data("changed")||c.trigger("change"),c.data("changed",!1)}).on("blur.mask",function(){s=b.val()}).on("focus.mask",function(e){!0===y.selectOnFocus&&r(e.target).select()}).on("focusout.mask",function(){y.clearIfNotMatch&&!n.test(b.val())&&b.val("")})},getRegexMask:function(){for(var e,t,a,n,i=[],s=0;s<k.length;s++)(e=M.translation[k.charAt(s)])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),a=e.optional,(e=e.recursive)?(i.push(k.charAt(s)),n={digit:k.charAt(s),pattern:t}):i.push(a||e?t+"?":t)):i.push(k.charAt(s).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return i=i.join(""),n&&(i=i.replace(new RegExp("("+n.digit+"(.*"+n.digit+")?)"),"($1)?").replace(new RegExp(n.digit,"g"),n.pattern)),new RegExp(i)},destroyEvents:function(){c.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(e){var t=c.is("input")?"val":"text";return t=0<arguments.length?(c[t]()!==e&&c[t](e),c):c[t]()},calculateCaretPosition:function(e){var t=b.getMasked(),a=b.getCaret();if(e!==t){var n=c.data("mask-previus-caret-pos")||0;t=t.length;var i,s=e.length,r=e=0,l=0,o=0;for(i=a;i<t&&b.maskDigitPosMap[i];i++)r++;for(i=a-1;0<=i&&b.maskDigitPosMap[i];i--)e++;for(i=a-1;0<=i;i--)b.maskDigitPosMap[i]&&l++;for(i=n-1;0<=i;i--)b.maskDigitPosMapOld[i]&&o++;s<a?a=10*t:a<=n&&n!==s?b.maskDigitPosMapOld[a]||(a=(n=a)-(o-l)-e,b.maskDigitPosMap[a]&&(a=n)):n<a&&(a=a+(l-o)+r)}return a},behaviour:function(e){e=e||window.event,b.invalid=[];var t=c.data("mask-keycode");if(-1===r.inArray(t,M.byPassKeys)){t=b.getMasked();var a=b.getCaret(),n=c.data("mask-previus-value")||"";return setTimeout(function(){b.setCaret(b.calculateCaretPosition(n))},r.jMaskGlobals.keyStrokeCompensation),b.val(t),b.setCaret(a),b.callbacks(e)}},getMasked:function(e,t){var a,n=[],i=void 0===t?b.val():t+"",s=0,r=k.length,l=0,o=i.length,c=1,u="push",h=-1,p=0;if(t=[],y.reverse){u="unshift",c=-1;var d=0;s=r-1,l=o-1;var f=function(){return-1<s&&-1<l}}else d=r-1,f=function(){return s<r&&l<o};for(;f();){var v=k.charAt(s),m=i.charAt(l),g=M.translation[v];g?(m.match(g.pattern)?(n[u](m),g.recursive&&(-1===h?h=s:s===d&&s!==h&&(s=h-c),d===h&&(s-=c)),s+=c):m===a?(p--,a=void 0):g.optional?(s+=c,l-=c):g.fallback?(n[u](g.fallback),s+=c,l-=c):b.invalid.push({p:l,v:m,e:g.pattern}),l+=c):(e||n[u](v),m===v?(t.push(l),l+=c):(a=v,t.push(l+p),p++),s+=c)}return e=k.charAt(d),r!==o+1||M.translation[e]||n.push(e),n=n.join(""),b.mapMaskdigitPositions(n,t,o),n},mapMaskdigitPositions:function(e,t,a){for(e=y.reverse?e.length-a:0,b.maskDigitPosMap={},a=0;a<t.length;a++)b.maskDigitPosMap[t[a]+e]=1},callbacks:function(e){function t(e,t,a){"function"==typeof y[e]&&t&&y[e].apply(this,a)}var a=b.val(),n=a!==s,i=[a,e,c,y];t("onChange",!0==n,i),t("onKeyPress",!0==n,i),t("onComplete",a.length===k.length,i),t("onInvalid",0<b.invalid.length,[a,e,c,b.invalid,y])}};c=r(c);var n,M=this,s=b.val();k="function"==typeof k?k(b.val(),void 0,c,y):k,M.mask=k,M.options=y,M.remove=function(){var e=b.getCaret();return M.options.placeholder&&c.removeAttr("placeholder"),c.data("mask-maxlength")&&c.removeAttr("maxlength"),b.destroyEvents(),b.val(M.getCleanVal()),b.setCaret(e),c},M.getCleanVal=function(){return b.getMasked(!0)},M.getMaskedVal=function(e){return b.getMasked(!1,e)},M.init=function(e){if(e=e||!1,y=y||{},M.clearIfNotMatch=r.jMaskGlobals.clearIfNotMatch,M.byPassKeys=r.jMaskGlobals.byPassKeys,M.translation=r.extend({},r.jMaskGlobals.translation,y.translation),M=r.extend(!0,{},M,y),n=b.getRegexMask(),e)b.events(),b.val(b.getMasked());else{y.placeholder&&c.attr("placeholder",y.placeholder),c.data("mask")&&c.attr("autocomplete","off");for(var t=!(e=0);e<k.length;e++){var a=M.translation[k.charAt(e)];if(a&&a.recursive){t=!1;break}}t&&c.attr("maxlength",k.length).data("mask-maxlength",!0),b.destroyEvents(),b.events(),e=b.getCaret(),b.val(b.getMasked()),b.setCaret(e)}},M.init(!c.is("input"))}r.maskWatchers={};function t(){var e=r(this),t={},a=e.attr("data-mask");if(e.attr("data-mask-reverse")&&(t.reverse=!0),e.attr("data-mask-clearifnotmatch")&&(t.clearIfNotMatch=!0),"true"===e.attr("data-mask-selectonfocus")&&(t.selectOnFocus=!0),o(e,a,t))return e.data("mask",new l(this,a,t))}var o=function(e,t,a){a=a||{};var n=r(e).data("mask"),i=JSON.stringify;e=r(e).val()||r(e).text();try{return"function"==typeof t&&(t=t(e)),"object"!=typeof n||i(n.options)!==i(a)||n.mask!==t}catch(e){}},e=function(e){var t=document.createElement("div"),a=(e="on"+e)in t;return a||(t.setAttribute(e,"return;"),a="function"==typeof t[e]),a};r.fn.mask=function(e,t){t=t||{};var a=this.selector,n=r.jMaskGlobals,i=n.watchInterval;n=t.watchInputs||n.watchInputs;function s(){if(o(this,e,t))return r(this).data("mask",new l(this,e,t))}return r(this).each(s),a&&""!==a&&n&&(clearInterval(r.maskWatchers[a]),r.maskWatchers[a]=setInterval(function(){r(document).find(a).each(s)},i)),this},r.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},r.fn.unmask=function(){return clearInterval(r.maskWatchers[this.selector]),delete r.maskWatchers[this.selector],this.each(function(){var e=r(this).data("mask");e&&e.remove().removeData("mask")})},r.fn.cleanVal=function(){return this.data("mask").getCleanVal()},r.applyDataMask=function(e){((e=e||r.jMaskGlobals.maskElements)instanceof r?e:r(e)).filter(r.jMaskGlobals.dataMaskAttr).each(t)},e={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&e("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},r.jMaskGlobals=r.jMaskGlobals||{},(e=r.jMaskGlobals=r.extend(!0,{},e,r.jMaskGlobals)).dataMask&&r.applyDataMask(),setInterval(function(){r.jMaskGlobals.watchDataMask&&r.applyDataMask()},e.watchInterval)},window.jQuery,window.Zepto),function(n){"use strict";n(function(){if(n("label.agreement-label").click(function(e){e.preventDefault();var t=n(this).siblings("input"),a=!t.prop("checked");t.prop("checked",a),t.change()}),n.fancybox){var a=n.fancybox.defaults.clickContent;n.fancybox.defaults.clickContent=function(e,t){e.$content[0].contains(document.activeElement)&&document.activeElement.blur(),a(e,t)}}})}(jQuery),function(s){"use strict";var a;s.fn.validate=function(e){if(this.length)return a=void 0===(e=e||{}).hideLabels||e.hideLabels,this.each(function(){var e=s(this).data("validator");e||(s(this).find(".inp").mask("+Z (000) 000-00-00",{translation:{Z:{pattern:/[78]/},"+":{pattern:/\+/,optional:!0}},onComplete:function(){s(this).trigger("completed")}}),s(this).find("span.add-textarea").click(function(){s(this).toggleClass("opened")}),o=o||new u,e=new l(this),s(this).data("validator",e))}),this};var h=/^(.+?)\[(.+)\]$/,t=/^[0-9]+$/,e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,n=/^[а-яё ]*$/i,i=/^(\+7|8) \(\d{3}\) \d{3}-\d{2}-\d{2}$/,p={required:"Пожалуйста, заполните поле.",valid_email:"Введите корректный email.",valid_phone:"Введите корректный номер телефона.",alpha:"Это поле может содержать только буквы русского алфавита.",min_length:"Поле должно содержать не менее %s символов."},r=[{el:".required",rule:"required"},{el:".inp",rule:"valid_phone"},{el:'[name="name1"]',rule:"alpha|min_length[2]"},{el:'[name="email1"], [name="email"]',rule:"valid_email"},{el:".agreement",rule:"agreement"}],l=function(e){this.form=e,this.allRules=r,this.buttons=[],this.fields=[];for(var t=0;t<e.elements.length;t++)if("submit"!==e.elements[t].type){var a=s(e.elements[t]),n=this._genElemRules(a);n.length?this.fields.push(new c(a,n.join("|"),this)):this.fields.push(new c(a,null,this))}else this.buttons.push(e.elements[t]);this._checkButtons(),s(e).submit(s.proxy(this,"_validateForm"))};s.extend(l.prototype,{_genElemRules:function(e){for(var t={},a=[],n=0;n<this.allRules.length;n++)e.is(this.allRules[n].el)&&(t[this.allRules[n].rule]=!0);for(var i in t)a.push(i);return a},_validateForm:function(e){for(var t=!1,a=0;a<this.fields.length;a++){this.fields[a]._validate()||(t=!0)}return t&&(e&&e.preventDefault?e.preventDefault():event&&(event.returnValue=!1)),!0},_checkButtons:function(){for(var e=!1,t=0;t<this.fields.length;t++){this.fields[t].valid||(e=!0)}var a=!1;e&&(a=!0);for(t=0;t<this.buttons.length;t++)this.buttons[t].disabled=a}});var o,c=function(e,t,a){this.elem=e,this.rules=t,this.value=null,this.oldValue="",this.rules&&(this.erElem=null,this.tipElem=null,this.required=-1!==t.indexOf("required"),this.filterInput=-1!==t.indexOf("alpha")),this.$placeholder=null,s(this.elem).siblings("label").length&&(this.$placeholder=s(this.elem).siblings("label"));var n=!0;Object.defineProperty(this,"valid",{get:function(){return n},set:function(e){e!==n&&(n=e,a._checkButtons())}}),this._validate(!0);var i=this;this.rules&&(e.on("blur change completed",function(){i._validate()}),e.on("input keypress keydown paste",function(){i._validate(!0)})),this.filterInput&&(e.on("input",function(){i._testInput()}),e.on("focusout",function(){i._tip(!0)})),this.$placeholder&&(e.on("focusin",function(){i._placeholder()}),e.on("focusout",function(){i._placeholder(!0)}))};s.extend(c.prototype,{_validate:function(e){if(e=e||!1,!this.rules)return!0;if(this.value!==this.elem.val()||!e){var t,a,n=this.rules.split("|"),i=!this.elem.val(),s=[];for(this.value=this.elem.val(),t=0,a=n.length;t<a;t++){var r=n[t],l=null,o=!1,c=h.exec(r);if(i&&!this.required)break;if((!i||-1!==["required","agreement"].indexOf(r))&&(c&&(r=c[1],l=c[2]),"!"===r.charAt(0)&&(r=r.substring(1,r.length)),"function"==typeof this._hooks[r]&&(this._hooks[r].apply(this,[l])||(o=!0)),o)){var u=p[r];l&&(u=u.replace("%s",l)),s.push(u)}}return s.length?(e||this._setError(s),this.valid=!1):(this._removeError(),this.valid=!0),this.valid}},_testInput:function(){this.value=this.elem.val(),this._hooks.alpha.apply(this)?(this.oldValue=this.value,this._tip(!0)):(this.elem.val(this.oldValue),this._tip())},_tip:function(e){var t=p.alpha;(e=e||!1)?this.tipElem&&(this.tipElem.remove(),this.tipElem=null):this.tipElem||(this.tipElem=s('<span class="message-tooltip">'+t+"</span>").insertAfter(this.elem))},_placeholder:function(e){var t=!this.elem.val();e=e||!1,a&&(e?t||this.$placeholder.addClass("label-none"):this.$placeholder.removeClass("label-none"))},_setError:function(e){this.erElem?this.erElem.html(e.join(" ")):-1===this.rules.indexOf("agreement")&&(this.erElem=s('<span class="message-error">'+e.join(" ")+"</span>").insertAfter(this.elem)),this.elem.addClass("error"),this.elem.removeClass("correctly")},_removeError:function(){this.erElem&&(this.erElem.remove(),this.erElem=null,this.elem.addClass("correctly"),this.elem.removeClass("error"))},_hooks:{required:function(){var e=this.elem[0].type;return"checkbox"===e||"radio"===e?!0===this.elem[0].checked:!!this.value},valid_email:function(){return e.test(this.value)},valid_phone:function(){return i.test(this.value)},min_length:function(e){return!!t.test(e)&&this.value.length>=parseInt(e,10)},alpha:function(){return n.test(this.value)},agreement:function(){var e=this.elem[0].type;if("checkbox"!==e&&"radio"!==e)return!!this.value;var t=!0===this.elem[0].checked;return t||o.show(this.elem),t}}});var u=function(){this.popup=s('<div id="modal-not-agreement">                    <div class="icon">                            <svg viewBox="0 0 22 22"><path d="M.35.35,21.82,21.82"/><path d="M21.82.35.35,21.82"/></svg>                    </div>                    <h2>Внимание!</h2>                    <p>Вы не согласились с нашей <a href="//privacy-policy/" >политикой конфиденциальности</a>. По Закону, мы не имеем права получать ваши контакты.</p>                    <div class="button">                            <button class="confirm btn">Согласиться с политикой</button>                    </div>            </div>').appendTo("body"),this.overlay=s('<div id="modal-not-agreement__overlay"></div>').appendTo("body"),this.checkbox=null;var e=this;this.popup.find(".confirm").click(function(){e.checkbox.prop("checked",!0),e.checkbox.change(),e.hide()})};s.extend(u.prototype,{show:function(e){this.checkbox=e,this.overlay.fadeIn(),this.popup.fadeIn()},hide:function(){this.overlay.fadeOut(),this.popup.fadeOut()}})}(jQuery);